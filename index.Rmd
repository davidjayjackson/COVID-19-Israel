---
title: "Israel: COVID-19 In the Promised Land: "
author: "David J Jackson"
date:  "July 14, 2020"
output: html_document
---

```{r setup, include=FALSE}
library(tidyverse)
library(RSQLite)
library(forecast)
library(lubridate)
library(ggeasy)
knitr::opts_chunk$set(echo = TRUE)
```
```{r,echo=FALSE}
rm(list=ls())
db <- dbConnect(SQLite(), dbname="../COVIDDB//COVID.sqlite3")
ECDC <- dbGetQuery(db,"select Reported,Countries,Cases,Deaths from ECDC")
ISRAEL <- ECDC %>% filter(Countries =="Israel")
ISRAEL$Reported <- as.Date(ISRAEL$Reported)
ISRAEL$DeathRate <- ISRAEL$Deaths/ISRAEL$Cases

## JHU Data
JHUDATA <- dbGetQuery(db,"select date,country,confirmed,deaths,recovered from JHUDATA
                      WHERE country='Israel'")
JHUDATA$date <- as.Date(JHUDATA$date)
JHUDATA$DeathRate <- JHUDATA$deaths/JHUDATA$confirmed


```

### Israel's Fight with COVID-19 (Daily Totals)

```{r,echo=FALSE}
ISRAEL <- ISRAEL %>% group_by(Weekly = floor_date(Reported,"week")) %>%
  summarize(total_cases = sum(Cases),
 total_deaths = sum(Deaths))
  
  

ISRAEL %>% ggplot() + geom_col(aes(x=Weekly,y=total_cases)) +
  labs(title="Total Weekly Cases: Israel's fight with COVID-19",x="Date Reported",y="Total Cases Reported") 

ISRAEL %>% ggplot() + geom_col(aes(x=Weekly,y=total_deaths)) +
  labs(title="Total Weekly Deaths: Israel's fight with COVID-19",x="Date Reported",y="Total Deaths Reported")

# ECDC %>% ggplot() + geom_col(aes(x=Reported,y=DeathRate)) +
#   labs(title="Rate of Deaths: Israel's fight with COVID-19",x="Date Reported",y="Death RAte (%)")
```

### Israel's Fight with COVID-19 Accumulated Totals (From Jan. 1,2020)

```{r,echo=FALSE}
JHUDATA %>% ggplot() + geom_col(aes(x=date,y=confirmed)) +
  labs(title="Total Cases: Israel's fight with COVID-19",x="Date Reported",y="Total Cases To Date")

JHUDATA %>% ggplot() + geom_col(aes(x=date,y=deaths)) +
  labs(title="Total Deaths: Israel's fight with COVID-19",x="Date Reported",y="Total  Deaths To Date")

JHUDATA %>% ggplot() + geom_col(aes(x=date,y=DeathRate)) +
  labs(title="Rate of Deaths: Israel's fight with COVID-19",x="Date Reported",y="Death RAte (%)")
```
```{r}
dbDisconnect(db)
```

